{"ast":null,"code":"let uid = 0;\nimport { defineComponent } from 'vue';\nimport * as htmlToImage from 'html-to-image';\nimport * as download from 'downloadjs';\nexport default {\n  name: 'Card',\n  props: ['value', 'height', 'width', 'suitimage', 'suitoffset'],\n  data() {\n    return {\n      scale: 1.0294,\n      backColor: \"white\",\n      borderColor: \"black\",\n      margin: 0.1,\n      unique: 1,\n      pos: {\n        x: 0,\n        y: 0\n      }\n    };\n  },\n  methods: {\n    physicalStyle() {\n      return `width: ${this.width}mm;\n                    height: ${this.height}mm;\n        `;\n    },\n    download() {\n      var self = this;\n      console.log(this.getAbsPos());\n      htmlToImage.toPng(document.getElementById('card-' + this.unique), {\n        'canvasWidth': 1100 * 1.11755725191,\n        'canvasHeight': 750 * 1.11755725191\n      }).then(function (dataUrl) {\n        console.log(dataUrl);\n        download(dataUrl, 'card-' + '-' + self.unique + '-' + '.png');\n      }).catch(function (error) {\n        console.error('oops, something went wrong!', error);\n      });\n    },\n    getAbsPos(element) {\n      var top = 0,\n        left = 0;\n      if (!element) {\n        console.log(\"FAILURE: Element was\", element);\n        return {\n          x: 0,\n          y: 0\n        };\n      }\n      do {\n        top += element.offsetTop || 0;\n        left += element.offsetLeft || 0;\n        element = element.offsetParent;\n      } while (element);\n      return {\n        y: top,\n        x: left\n      };\n    },\n    topSuitStyle() {\n      print(this.pos);\n      if (this.pos) {\n        return `\n                    position: absolute;\n                    top: ${this.pos.y + this.suitoffset.y}mm;\n                    left: ${this.pos.x + this.suitoffset.x}mm;\n                `;\n      }\n    },\n    position() {\n      return this.getAbsPos(document.getElementById('card-' + this.unique));\n    },\n    getSuitImageLocationTop() {\n      return {\n        x: this.pos.x + this.suitoffset.x,\n        y: this.pos.y + this.suitoffset.y\n      };\n    }\n  },\n  created() {\n    this.unique = uid;\n    uid++;\n  },\n  mounted() {\n    console.log(this.position());\n    this.pos = this.position();\n  },\n  watch: {\n    output: function (old, newVal) {\n      if (newVal) {\n        this.download();\n      }\n    }\n  }\n};","map":{"version":3,"names":["uid","defineComponent","htmlToImage","download","name","props","data","scale","backColor","borderColor","margin","unique","pos","x","y","methods","physicalStyle","width","height","self","console","log","getAbsPos","toPng","document","getElementById","then","dataUrl","catch","error","element","top","left","offsetTop","offsetLeft","offsetParent","topSuitStyle","print","suitoffset","position","getSuitImageLocationTop","created","mounted","watch","output","old","newVal"],"sources":["/git/card-gen/card-gen/src/components/Card.vue"],"sourcesContent":["<script setup lang=\"ts\"></script>\n<template>\n    <div @click=\"download()\" :id=\"'card-' + unique\" :style=\"physicalStyle()\">\n        <img :src=\"suitimage\" width=\"50\" height=\"50\" class=\"suit\" :style=\"topSuitStyle()\"/>\n        Position: {{ pos }}\n    </div>\n</template>\n<style scoped>\n.card :hover {\n    cursor: pointer;\n}\n\n.card-title {\n    white-space: pre-line;\n    font-weight: bold;\n    text-align: center;\n    flex-grow: 1;\n}\n\n.card-description {\n    color: #333333;\n    font-weight: bold;\n    white-space: pre-line;\n    overflow-wrap: break-word;\n}\n\n.qr-container {\n    display: flex;\n    margin-top: 10px;\n    justify-content: center;\n    align-items: end;\n    flex-grow: 1;\n}\n</style>\n\n\n<script>\n\nlet uid = 0;\n\nimport { defineComponent } from 'vue'\n\nimport * as htmlToImage from 'html-to-image';\nimport * as download from 'downloadjs';\n\n\nexport default {\n    name: 'Card',\n    props: ['value', 'height', 'width', 'suitimage', 'suitoffset'],\n    data() {\n        return {\n            scale: 1.0294,\n            backColor: \"white\",\n            borderColor: \"black\",\n            margin: 0.1,\n            unique: 1,\n            pos: {x: 0, y: 0},\n        }\n    },\n    methods: {\n        physicalStyle() {\n            return `width: ${this.width}mm;\n                    height: ${this.height}mm;\n        `\n        },\n        download() {\n            var self = this;\n            console.log(this.getAbsPos())\n            htmlToImage.toPng(document.getElementById('card-' + this.unique),\n                { 'canvasWidth': 1100 * 1.11755725191, 'canvasHeight': 750 * 1.11755725191 })\n                .then(function (dataUrl) {\n                    console.log(dataUrl);\n                    (download)(dataUrl, 'card-' + '-' + self.unique + '-' + '.png');\n                })\n                .catch(function (error) {\n                    console.error('oops, something went wrong!', error);\n                });\n        },\n        getAbsPos(element) {\n            var top = 0, left = 0;\n            if (!element) {\n                console.log(\"FAILURE: Element was\", element)\n                return {x: 0, y: 0};\n            }\n            do {\n                top += element.offsetTop || 0;\n                left += element.offsetLeft || 0;\n                element = element.offsetParent;\n            } while (element);\n\n            return {\n                y: top,\n                x: left\n            };\n        },\n        topSuitStyle() {\n            print(this.pos)\n            if (this.pos) {\n                return `\n                    position: absolute;\n                    top: ${this.pos.y + this.suitoffset.y}mm;\n                    left: ${this.pos.x + this.suitoffset.x}mm;\n                `\n            }\n        },\n        position() {\n            return this.getAbsPos(document.getElementById('card-' + this.unique));\n        },\n        getSuitImageLocationTop() {\n            return {\n                x: this.pos.x + this.suitoffset.x,\n                y: this.pos.y + this.suitoffset.y\n            }\n        }\n    },\n    created() {\n        this.unique = uid;\n        uid++\n    },\n    mounted() {\n        console.log(this.position());\n        this.pos = this.position();\n    },\n    watch: {\n        output: function (old, newVal) {\n            if (newVal) {\n                this.download()\n            }\n        }\n    },\n}\n</script>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}